---
version: 2
sources:
  - name: frakture_global_message_paidmedia
    database: "{{ var('database') }}"
    schema: src_frakture
    tables:
      - name: global_message_summary_by_date
        freshness:
          warn_after: {count: 2, period: day}
          error_after: {count: 7, period: day}
        loaded_at_field: cast(publish_date as timestamp)
        description: Summary of global messages by date
        columns:
          - name: message_id
            data_type: INT64
            description: Unique identifier for the message
          - name: date
            data_type: DATE
            description: Date of the message
          - name: bot_id
            data_type: STRING
            description: Unique identifier for the bot
          - name: bot_path
            data_type: STRING
            description: Path of the bot
          - name: bot_label
            data_type: STRING
            description: Label of the bot
          - name: bot_nickname
            data_type: STRING
            description: Nickname of the bot
          - name: channel
            data_type: STRING
            description: Channel of the message
          - name: channel_label
            data_type: STRING
            description: Label of the channel
          - name: type
            data_type: STRING
            description: Type of the message
          - name: status
            data_type: STRING
            description: Status of the message
          - name: publish_date
            data_type: DATETIME
            description: Publish date of the message
          - name: campaign_id
            data_type: STRING
            description: Unique identifier for the campaign
          - name: submodule
            data_type: STRING
            description: Submodule of the message
          - name: remote_id
            data_type: STRING
            description: Remote identifier for the message
          - name: do_not_attribute
            data_type: INT64
            description: Flag indicating if the message should not be attributed
          - name: sent
            data_type: INT64
            description: Number of messages sent
          - name: impressions
            data_type: INT64
            description: Number of impressions received
          - name: clicks
            data_type: INT64
            description: Number of clicks received
          - name: engagements
            data_type: INT64
            description: Number of engagements received
          - name: actions
            data_type: INT64
            description: Number of actions performed
          - name: leads
            data_type: INT64
            description: Number of leads generated
          - name: total_actions
            data_type: INT64
            description: Total number of actions performed
          - name: unique_actions
            data_type: INT64
            description: Number of unique actions performed
          - name: unsubscribes
            data_type: INT64
            description: Number of unsubscribes
          - name: complaints
            data_type: INT64
            description: Number of complaints received
          - name: soft_bounces
            data_type: INT64
            description: Number of soft bounces
          - name: hard_bounces
            data_type: INT64
            description: Number of hard bounces
          - name: blocked
            data_type: INT64
            description: Number of blocked messages
          - name: transactions
            data_type: FLOAT64
            description: Number of transactions
          - name: revenue
            data_type: FLOAT64
            description: Revenue generated
          - name: spend
            data_type: FLOAT64
            description: Spend on the message
          - name: attributed_revenue
            data_type: FLOAT64
            description: Revenue attributed to the message
          - name: attributed_transactions
            data_type: INT64
            description: Number of transactions attributed to the message
          - name: attributed_revenue_day_1
            data_type: FLOAT64
            description: Revenue attributed to the message on day 1
          - name: attributed_transactions_day_1
            data_type: INT64
            description: Number of transactions attributed to the message on day 1
          - name: attributed_revenue_day_6
            data_type: FLOAT64
            description: Revenue attributed to the message on day 6
          - name: attributed_transactions_day_6
            data_type: INT64
            description: Number of transactions attributed to the message on day 6
          - name: attributed_recurring_revenue
            data_type: FLOAT64
            description: Recurring revenue attributed to the message
          - name: attributed_recurring_transactions
            data_type: INT64
            description: Number of recurring transactions attributed to the message
          - name: attributed_initial_recurring_revenue
            data_type: FLOAT64
            description: Initial recurring revenue attributed to the message
          - name: attributed_initial_recurring_transactions
            data_type: INT64
            description: Number of initial recurring transactions attributed to the
              message
          - name: attributed_subsequent_recurring_revenue
            data_type: FLOAT64
            description: Subsequent recurring revenue attributed to the message
          - name: attributed_subsequent_recurring_transactions
            data_type: INT64
            description: Number of subsequent recurring transactions attributed to
              the message
          - name: attributed_min_amount
            data_type: FLOAT64
            description: Minimum amount attributed to the message
          - name: origin_person_count
            data_type: INT64
            description: Number of origin persons
          - name: recurtype
            data_type: STRING
            description: Recurring type of the message
          - name: goal
            data_type: STRING
            description: Goal of the message
          - name: channel_type
            data_type: STRING
            description: Type of the channel
          - name: appeal
            data_type: STRING
            description: Appeal of the message
          - name: campaign_label
            data_type: STRING
            description: Label of the campaign
          - name: audience
            data_type: STRING
            description: Target audience of the message
          - name: label
            data_type: STRING
            description: Label of the message
          - name: subject
            data_type: STRING
            description: Subject of the message
          - name: campaign_name
            data_type: STRING
            description: Name of the campaign
          - name: campaign
            data_type: STRING
            description: Campaign of the message
          - name: account_prefix
            data_type: STRING
            description: Prefix of the account
          - name: from_name
            data_type: STRING
            description: From name of the message
          - name: preview_url
            data_type: STRING
            description: URL preview of the message
          - name: primary_source_code
            data_type: STRING
            description: Primary source code of the message
          - name: primary_source_code_override
            data_type: STRING
            description: Override of the primary source code
          - name: final_primary_source_code
            data_type: STRING
            description: Final primary source code of the message
      - name: global_message
        description: Global messages
        columns:
          - name: message_id
            data_type: INT64
            description: Unique identifier for the message
          - name: channel
            data_type: STRING
            description: Channel of the message
          - name: channel_label
            data_type: STRING
            description: Label of the channel
          - name: type
            data_type: STRING
            description: Type of the message
          - name: status
            data_type: STRING
            description: Status of the message
          - name: publish_date
            data_type: DATETIME
            description: Publish date of the message
          - name: campaign_id
            data_type: STRING
            description: Unique identifier for the campaign
          - name: bot_id
            data_type: STRING
            description: Unique identifier for the bot
          - name: submodule
            data_type: STRING
            description: Submodule of the message
          - name: remote_id
            data_type: STRING
            description: Remote identifier for the message
          - name: do_not_attribute
            data_type: INT64
            description: Flag indicating if the message should not be attributed
          - name: label
            data_type: STRING
            description: Label of the message
          - name: subject
            data_type: STRING
            description: Subject of the message
          - name: campaign_name
            data_type: STRING
            description: Name of the campaign
          - name: from_name
            data_type: STRING
            description: From name of the message
          - name: preview_url
            data_type: STRING
            description: URL preview of the message
          - name: primary_source_code
            data_type: STRING
            description: Primary source code of the message
          - name: primary_source_code_override
            data_type: STRING
            description: Override of the primary source code
          - name: final_primary_source_code
            data_type: STRING
            description: Final primary source code of the message
